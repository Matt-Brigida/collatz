#include <stdio.h>
#include <gmp.h>

void collatz(mpz_t big_number);

int
main(void)
{
    
  const char* big_num = "4543535344832748293473298472983479283749823472938472938472394293429342992478994561233456531529582812592587348452298844153600399483578397583745398573908475389754389573492857390845739248043907398079308790340830949879834983479038750849837453894758396863857329857385638465834956983456348956032494856348958435734985738497589347589375177777777733333333332222244446777776767676767667677776767777662222222226683294792875637567326587346578365783645783647583657864875378578365783264745637485736573657345787888888888888888888888888888888888888888888888833333333333333333333333333333333333333333333333333333333333333333322222222222222222222222222222222222222222222222222222222222222222222222222222222222255555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555557534658746357843658736758643756378465783657834265847365783658763875638765837465387658376578365873657836578637856387657836537465873657836578365378658376587364578365376537856783465734657364578365743657385683758574398574389578937584375834758375837587384573895738945783497583945735893475398752437865346765297464975482654865478296572943659874262247563274597256724564205620562475265024562056205054378750894729807501462467582465782462054687456205848674549820646298435762068243577046286024857246040386584057024604254892574698678294720698240768472549869826084829489679228746298268264378124579764213568900182748775528739859648548786548386274954673954637153464715432941536454653894369459345289494574542867954376436736747634264553693458739287539875893745983758937598347590328793087403990745903875938479837459087589374598375893745903847589327549834759384759387398754398579382745903275983745938275490328745908327549382753948573987549843759384754932875938754985665802938584568265665620945874584982758932653892457389759327509328758309563829658937509387537436583276574831212129898989463746523473827464732847893652384782374658923478327489237486582347289748923483265928374293874927556293847328974983274893728472983475698327487239847289365283742398748923562839472398742985698325873498757534957957439875934563987398758356457839475893247598327539875938745380475034598049589038503498503948530458390679408309583904583490674390583049583490585830458439085304986704985430925896769432376027691239876583487298659238732984792385628937492837498327482374852387482397482937456298387482397483274893742365982374289374823748923749827349237489347569283743829748329749832742983652983472398472937583475093475398573984075392045798347539845768485732974534753498564389573847547329847928374982374982374568392742947658723639863562956293865239865892365956832652965823656928365856386592836598265982365934728374829374238328965297807867859678697856756434675675657585443256839306189061064981058645164644893788492002476768942965860085308789698985989698798968508494893829013807090580000000000000000000000000000000000000000000000000000000000000000000000000999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999888888888888888888888888888888888888888888888889475329875893475893758937583750984375980375908237471448723894723984729837489235692365982652985629856985693865959328479387426598236592837783055768576565858763578658567695667656550402642556436754519163631545456457451838464151111111111108568538463432586428548285436528756657628856485645586587587711011001010010101010101010011010100101000101010101010010101110100101010010101099999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999101498723098472389479283472938472987498273498274982749082173482974928074290829429328298329847928749208728479247023918476786589745910101011000000000001010101010010101010101010186536752873567825679858758756920101010101100101010101010010100100100010101001011110000010102317641397561786431895610549657081500781648795367816571657415641068706014698375671895648561086503875687135615684365847510651068418743101584508575418064165710468156748015658717581861678058701468751784651786418451306508136587413078165418506513175418705";

  mpz_t big_number;
  mpz_init(big_number);
  mpz_set_str(big_number, big_num, 10);

  collatz(big_number);
  
}

void collatz(mpz_t big_number)
{

  int counter = 0;

  mpz_t two;
  mpz_init(two);
  mpz_set_si(two, 2);

  while(!(mpz_cmp_d(big_number, 1) == 0))
    {
      counter = counter + 1;
   if (mpz_even_p(big_number))
    {
      /* void (*null_ptr)() = NULL; */
      /* mpz_out_str(null_ptr,10, big_number); */
      gmp_printf ("Collatz number %Zd\n", big_number);

      mpz_cdiv_q(big_number, big_number, two);
      collatz(big_number);
    }
   else 
    {
      /* void (*null_ptr)() = NULL; */
      /* mpz_out_str(null_ptr,10, big_number); */
      gmp_printf ("Collatz number %Zd\n", big_number);

      mpz_mul_ui(big_number, big_number, 3);
      mpz_add_ui(big_number, big_number, 1);
      collatz(big_number);
    }
    }
    /* printf("The counter is: %d\n", counter); */
}
    


/*** way to print big number
  void (*null_ptr)() = NULL;
  mpz_out_str(null_ptr,10, counter);
***/
