#include <stdio.h>
#include <gmp.h>

void collatz(mpz_t big_number);

int
main(void)
{
    
  const char* big_num = "45435353448327482934732984729834792837498234729384729384723942934293429924789945612334565315295828125925873484522988441536003994835783975837453985739084753897543895734928573908457392480439073980793087903408309498798349834790387508498374538947583968638573298573856384658349569834563489560324948563489584357349857384975893475893751777777777333333333322222444467777767676767676676777767677776622222222266832947928756375673265873465783657836457836475836578648753785783657832647456374857365736573457878888888888888888888888888888888888888888888888333333333333333333333333333333333333333333333333333333333333333333222222222222222222222222222222222222222222222222222222222222222222222222222222222222555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555575346587463578436587367586437563784657836578342658473657836587638756387658374653876583765783658736578365786378563876578365374658736578365783653786583765873645783653765378567834657346573645783657436573856837585743985743895789375843758347583758375873845738957389457834975839457358934753987524378653467652974649754826548654782965729436598742622475632745972567245642056205624752650245620562050543787508947298075014624675824657824620546874562058486745498206462984357620682435770462860248572460403865840570246042548925746986782947206982407684725498698260848294896792287462982682643781245797642135689001827487755287398596485487865483862749546739546371534647154329415364546538943694593452894945745428679543764367367476342645536";

  mpz_t big_number;
  mpz_init(big_number);
  mpz_set_str(big_number, big_num, 10);

  collatz(big_number);
  
}

void collatz(mpz_t big_number)
{

  int counter = 0;

  mpz_t two;
  mpz_init(two);
  mpz_set_si(two, 2);

  while(!(mpz_cmp_d(big_number, 1) == 0))
    {
      counter = counter + 1;
   if (mpz_even_p(big_number))
    {
      /* void (*null_ptr)() = NULL; */
      /* mpz_out_str(null_ptr,10, big_number); */
      gmp_printf ("Collatz number %Zd\n", big_number);

      mpz_cdiv_q(big_number, big_number, two);
      collatz(big_number);
    }
   else 
    {
      /* void (*null_ptr)() = NULL; */
      /* mpz_out_str(null_ptr,10, big_number); */
      gmp_printf ("Collatz number %Zd\n", big_number);

      mpz_mul_ui(big_number, big_number, 3);
      mpz_add_ui(big_number, big_number, 1);
      collatz(big_number);
    }
    }
    /* printf("The counter is: %d\n", counter); */
}
    


/*** way to print big number
  void (*null_ptr)() = NULL;
  mpz_out_str(null_ptr,10, counter);
***/
