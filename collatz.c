#include <stdio.h>
#include <gmp.h>

void collatz(mpz_t big_number);

int
main(void)
{
    
  const char* big_num = "454353534483274829347329847298347928374982347293847293847239429342934299247899456123345653152958281259258734845229884415360039948357839758374539857390847538975438957349285739084573924804390739807930879034083094987983498347903875084983745389475839686385732985738563846583495698345634895603249485634895843573498573849758934758937517777777773333333333222224444677777676767676766767777676777766222222222668329479287563756732658734657836578364578364758365786487537857836578326474563748573657365734578788888888888888888888888888888888888888888888883333333333333333333333333333333333333333333333333333333333333333332222222222222222222222222222222222222222222222222222222222222222222222222222222222225555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555753465874635784365873675864375637846578365783426584736578365876387563876583746538765837657836587365783657863785638765783653746587365783657836537865837658736457836537653785678346573465736457836574365738568375857439857438957893758437583475837583758738457389573894578349758394573589347539875243786534676529746497548265486547829657294365987426224756327459725672456420562056247526502456205620505437875089472980750146246758246578246205468745620584867454982064629843576206824357704628602485724604038658405702460425489257469867829472069824076847254986982608482948967922874629826826437812457976421356890018274877552873985964854878654838627495467395463715346471543294153645465389436945934528949457454286795437643673674763426455369345873928753987589374598375893759834759032879308740399074590387593847983745908758937459837589374590384758932754983475938475938739875439857938274590327598374593827549032874590832754938275394857398754984375938475493287593875498566580293858456826566562094587458498275893265389245738975932750932875830956382965893750938753743658327657483121212989898946374652347382746473284789365238478237465892347832748923748658234728974892348326592837429387492755629384732897498327489372847298347569832748723984728936528374239874892356283947239874298569832587349875753495795743987593456398739875835645783947589324759832753987593874538047503459804958903850349850394853045839067940830958390458349067439058304958349058583045843908530498670498543092589676943237602769123987658348729865923873298479238562893749283749832748237485238748239748293745629838748239748327489374236598237428937482374892374982734923748934756928374382974832974983274298365298347239847293758347509347539857398407539204579834753984576848573297453475349856438957384754732984792837498237498237456839274294765872363986356295629386523986589236595683265296582365692836585638659283659826598236593472837482937423832896529780786785967869785675643467567565758544325683930618906106498105864516464489378849200247676894296586008530878969898598969879896850849489382901380709058000000000000000000000000000000000000000000000000000000000000000000000000099999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999988888888888888888888888888888888888888888888888947532987589347589375893758375098437598037590823747144872389472398472983748923569236598265298562985698569386595932847938742659823659283778305576857656585876357865856769566765655040264255643675451916363154545645745183846415111111111110856853846343258642854828543652875665762885648564558658758771101100101001010101010101001101010010100010101010101001010111010010101001010109999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999910149872309847238947928347293847298749827349827498274908217348297492807429082942932829832984792874920872847924702391847678658974591010101100000000000101010101001010101010101018653675287356782567985875875692010101010110010101010101001010010010001010100101111000001010231764139756178643189561054965708150078164879536781657165741564106870601469837567189564856108650387568713561568436584751065106841874310158450857541806416571046815674801565871758186167805870146875178465178641845130650813658741307816541850651317541870548576418561109991847580327304985739874539084753098475039847509387450394750938745908375";

  mpz_t big_number;
  mpz_init(big_number);
  mpz_set_str(big_number, big_num, 10);

  collatz(big_number);
  
}

void collatz(mpz_t big_number)
{

  int counter = 0;

  mpz_t two;
  mpz_init(two);
  mpz_set_si(two, 2);

  while(!(mpz_cmp_d(big_number, 1) == 0))
    {
      counter = counter + 1;
   if (mpz_even_p(big_number))
    {
      /* void (*null_ptr)() = NULL; */
      /* mpz_out_str(null_ptr,10, big_number); */
      gmp_printf ("Collatz number %Zd\n", big_number);

      mpz_cdiv_q(big_number, big_number, two);
      collatz(big_number);
    }
   else 
    {
      /* void (*null_ptr)() = NULL; */
      /* mpz_out_str(null_ptr,10, big_number); */
      gmp_printf ("Collatz number %Zd\n", big_number);

      mpz_mul_ui(big_number, big_number, 3);
      mpz_add_ui(big_number, big_number, 1);
      collatz(big_number);
    }
    }
    /* printf("The counter is: %d\n", counter); */
}
    


/*** way to print big number
  void (*null_ptr)() = NULL;
  mpz_out_str(null_ptr,10, counter);
***/
