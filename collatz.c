#include <stdio.h>
#include <gmp.h>

void collatz(mpz_t big_number);

int
main(void)
{
    
  const char* big_num = "45435353448327482934732984729834792837498234729384729384723942934293429924789945612334565315295828125925873484522988441536003994835783975837453985739084753897543895734928573908457392480439073980793087903408309498798349834790387508498374538947583968638573298573856384658349569834563489560324948563489584357349857384975893475893751777777777333333333322222444467777767676767676676777767677776622222222266832947928756375673265873465783657836457836475836578648753785783657832647456374857365736573457878888888888888888888888888888888888888888888888333333333333333333333333333333333333333333333333333333333333333333222222222222222222222222222222222222222222222222222222222222222222222222222222222222555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555575346587463578436587367586437563784657836578342658473657836587638756387658374653876583765783658736578365786378563876578365374658736578365783653786583765873645783653765378567834657346573645783657436573856837585743985743895789375843758347583758375873845738957389457834975839457358934753987524378653467652974649754826548654782965729436598742622475632745972567245642056205624752650245620562050543787508947298075014624675824657824620546874562058486745498206462984357620682435770462860248572460403865840570246042548925746986782947206982407684725498698260848294896792287462982682643781245797642135689001827487755287398596485487865483862749546739546371534647154329415364546538943694593452894945745428679543764367367476342645536934587392875398758937459837589375983475903287930874039907459038759384798374590875893745983758937459038475893275498347593847593873987543985793827459032759837459382754903287459083275493827539485739875498437593847549328759387549856658029385845682656656209458745849827589326538924573897593275093287583095638296589375093875374365832765748312121298989894637465234738274647328478936523847823746589234783274892374865823472897489234832659283742938749275562938473289749832748937284729834756983274872398472893652837423987489235628394723987429856983258734987575349579574398759345639873987583564578394758932475983275398759387453804750345980495890385034985039485304583906794083095839045834906743905830495834905858304584390853049867049854309258967694323760276912398765834872986592387329847923856289374928374983274823748523874823974829374562983874823974832748937423659823742893748237489237498273492374893475692837438297483297498327429836529834723984729375834750934753985739840753920457983475398457684857329745347534985643895738475473298479283749823749823745683927429476587236398635629562938652398658923659568326529658236569283658563865928365982659823659347283748293742383289652978078678596786978567564346756756575854432568393061890610649810586451646448937884920024767689429658600853087896989859896987989685084948938290138070905800000000000000000000000000000000000000000000000000000000000000000000000009999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999998888888888888888888888888888888888888888888888894753298758934758937589375837509843759803759082374714487238947239847298374892356923659826529856298569856938659593284793874265982365928377830557685765658587635786585676956676565504026425564367545191636315454564574518384641511111111111085685384634325864285482854365287566576288564856455865875877110110010100101010101010100110101001010001010101010100101011101001010100101010999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999991014987230984723894792834729384729874982734982749827490821734829749280742908294293282983298479287492087284792470239184767865897459101010110000000000010101010100101010101010101865367528735678256798587587569201010101011001010101010100101001001000101010010111100000101023176413975617864318956105496570815007816487953678165716574156410687060146983756718956485610865038756871356156843658475106510684187431015845085754180641657104681567480156587175818616780587014";

  mpz_t big_number;
  mpz_init(big_number);
  mpz_set_str(big_number, big_num, 10);

  collatz(big_number);
  
}

void collatz(mpz_t big_number)
{

  int counter = 0;

  mpz_t two;
  mpz_init(two);
  mpz_set_si(two, 2);

  while(!(mpz_cmp_d(big_number, 1) == 0))
    {
      counter = counter + 1;
   if (mpz_even_p(big_number))
    {
      /* void (*null_ptr)() = NULL; */
      /* mpz_out_str(null_ptr,10, big_number); */
      gmp_printf ("Collatz number %Zd\n", big_number);

      mpz_cdiv_q(big_number, big_number, two);
      collatz(big_number);
    }
   else 
    {
      /* void (*null_ptr)() = NULL; */
      /* mpz_out_str(null_ptr,10, big_number); */
      gmp_printf ("Collatz number %Zd\n", big_number);

      mpz_mul_ui(big_number, big_number, 3);
      mpz_add_ui(big_number, big_number, 1);
      collatz(big_number);
    }
    }
    /* printf("The counter is: %d\n", counter); */
}
    


/*** way to print big number
  void (*null_ptr)() = NULL;
  mpz_out_str(null_ptr,10, counter);
***/
